<p>Grunt was an awesome tool.  In fact I’ve used it on just about every project for the past year.  Today’s a sad day though, I’ve started my first major app without my beloved grunt.  I’m moving to Gulp because it seems to be much faster and Gulp is much more code focused rather than config focused like Grunt.  And if we’re being honnest it’s also because most people in the web community are moving to Gulp and I don’t want to get left behind.</p>

<p>So, here’s my last Gruntfile…</p>

<div class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="s2">&quot;use strict&quot;</span><span class="p">;</span>

<span class="nx">module</span><span class="p">.</span><span class="nx">exports</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">grunt</span><span class="p">)</span> <span class="p">{</span>

  <span class="c1">// Set global variables based on project</span>
  <span class="kd">var</span> <span class="nx">globalConfig</span> <span class="o">=</span> <span class="p">{</span>
    <span class="c1">// Set source folder path</span>
    <span class="nx">src</span><span class="o">:</span> <span class="s1">&#39;site/src/&#39;</span><span class="p">,</span>
    <span class="c1">// set destination folder path</span>
    <span class="nx">dest</span><span class="o">:</span> <span class="s1">&#39;site/dest/&#39;</span>
  <span class="p">};</span>

  <span class="nx">grunt</span><span class="p">.</span><span class="nx">initConfig</span><span class="p">({</span>
    <span class="nx">pkg</span><span class="o">:</span> <span class="nx">grunt</span><span class="p">.</span><span class="nx">file</span><span class="p">.</span><span class="nx">readJSON</span><span class="p">(</span><span class="s2">&quot;package.json&quot;</span><span class="p">),</span>
    <span class="nx">globalConfig</span><span class="o">:</span> <span class="nx">globalConfig</span><span class="p">,</span>

    <span class="c1">// Using libsass!</span>
    <span class="c1">// There are know issues with this version.</span>
    <span class="c1">// If you run into issues move to grunt-contrib-sass</span>
    <span class="nx">sass</span><span class="o">:</span> <span class="p">{</span>
      <span class="nx">options</span><span class="o">:</span> <span class="p">{</span>
        <span class="nx">outputStyle</span><span class="o">:</span> <span class="s2">&quot;compressed&quot;</span><span class="p">,</span>
        <span class="nx">sourceMap</span><span class="o">:</span> <span class="kc">false</span>
      <span class="p">},</span>
      <span class="nx">dist</span><span class="o">:</span> <span class="p">{</span>
        <span class="nx">files</span><span class="o">:</span> <span class="p">{</span>
          <span class="s2">&quot;&lt;%= globalConfig.src %&gt;_libs/scss.css&quot;</span><span class="o">:</span> <span class="s2">&quot;&lt;%= globalConfig.src %&gt;_scss/main.scss&quot;</span>
       <span class="p">}</span>
      <span class="p">}</span>
    <span class="p">},</span>

    <span class="c1">// Autoprefix sass output for browser compatablity</span>
    <span class="nx">autoprefixer</span><span class="o">:</span> <span class="p">{</span>
      <span class="nx">global</span><span class="o">:</span> <span class="p">{</span>
        <span class="nx">src</span><span class="o">:</span> <span class="s2">&quot;&lt;%= globalConfig.src %&gt;_libs/scss.css&quot;</span><span class="p">,</span>
        <span class="nx">dest</span><span class="o">:</span> <span class="s2">&quot;&lt;%= globalConfig.src %&gt;_libs/scss.css&quot;</span>
      <span class="p">}</span>
    <span class="p">},</span>

    <span class="c1">// combines both css and js files</span>
     <span class="nx">concat</span><span class="o">:</span> <span class="p">{</span>
      <span class="nx">options</span><span class="o">:</span> <span class="p">{</span>
        <span class="nx">banner</span><span class="o">:</span> <span class="s1">&#39;/*------------------------------------------------------------------------\n|  Last build on: &lt;%= grunt.template.today(&quot;dddd, mmmm dS, yyyy, h:MM:ss TT&quot;)%&gt;\n------------------------------------------------------------------------*/\n&#39;</span><span class="p">,</span>
      <span class="p">},</span>
      <span class="nx">css</span><span class="o">:</span> <span class="p">{</span>

        <span class="nx">src</span><span class="o">:</span> <span class="p">[</span> 
          <span class="s1">&#39;&lt;%= globalConfig.src %&gt;_libs/_normalize.css&#39;</span><span class="p">,</span>
          <span class="c1">//&#39;&lt;%= globalConfig.src %&gt;_libs/_bootstrap.css&#39;,</span>
          <span class="c1">//&#39;&lt;%= globalConfig.src %&gt;_libs/_bootstrapTheme.css&#39;,</span>
          <span class="c1">//&#39;&lt;%= globalConfig.src %&gt;_libs/_foundations.css&#39;,</span>
          <span class="s1">&#39;&lt;%= globalConfig.src %&gt;_libs/scss.css&#39;</span>
          <span class="p">],</span>
        <span class="nx">dest</span><span class="o">:</span> <span class="s1">&#39;&lt;%= globalConfig.dest %&gt;main.css&#39;</span><span class="p">,</span>
      <span class="p">},</span>
      <span class="nx">js</span><span class="o">:</span> <span class="p">{</span>
        <span class="nx">src</span><span class="o">:</span> <span class="p">[</span><span class="s1">&#39;&lt;%= globalConfig.src %&gt;/_js/*.js&#39;</span><span class="p">],</span>
        <span class="nx">dest</span><span class="o">:</span> <span class="s1">&#39;&lt;%= globalConfig.dest %&gt;main.js&#39;</span><span class="p">,</span>
      <span class="p">},</span>
    <span class="p">},</span>

    <span class="c1">// Combines and minifies sass and css frameworks [doesn&#39;t support banners]</span>
    <span class="nx">cssmin</span><span class="o">:</span> <span class="p">{</span>
      <span class="nx">target</span><span class="o">:</span> <span class="p">{</span>
        <span class="nx">files</span><span class="o">:</span> <span class="p">{</span><span class="s1">&#39;&lt;%= globalConfig.dest %&gt;main.css&#39;</span><span class="o">:</span><span class="p">[</span><span class="s1">&#39;&lt;%= globalConfig.dest %&gt;main.css&#39;</span><span class="p">]</span>
        <span class="p">}</span>
      <span class="p">}</span>
    <span class="p">},</span>

    <span class="c1">// combines and minifies javascript</span>
    <span class="nx">uglify</span><span class="o">:</span> <span class="p">{</span>
      <span class="nx">options</span><span class="o">:</span> <span class="p">{</span>
        <span class="nx">banner</span><span class="o">:</span> <span class="s1">&#39;/*! &lt;%= grunt.template.today(&quot;isoDateTime&quot;) %&gt; */&#39;</span>
      <span class="p">},</span>
      <span class="nx">my_target</span><span class="o">:</span> <span class="p">{</span>
        <span class="nx">files</span><span class="o">:</span> <span class="p">{</span>
          <span class="s1">&#39;&lt;%= globalConfig.dest %&gt;main.js&#39;</span><span class="o">:</span> <span class="p">[</span><span class="s1">&#39;&lt;%= globalConfig.dest %&gt;main.js&#39;</span><span class="p">]</span>
        <span class="p">}</span>
      <span class="p">}</span>
    <span class="p">},</span>

    <span class="c1">// Loslessly compresses all png, jpg and gif images</span>
    <span class="nx">imagemin</span><span class="o">:</span> <span class="p">{</span> 
      <span class="nx">dynamic</span><span class="o">:</span> <span class="p">{</span>
        <span class="nx">files</span><span class="o">:</span> <span class="p">[{</span>
          <span class="nx">expand</span><span class="o">:</span> <span class="kc">true</span><span class="p">,</span>
          <span class="nx">cwd</span><span class="o">:</span> <span class="s1">&#39;&lt;%= globalConfig.src %&gt;_img/&#39;</span><span class="p">,</span>
          <span class="nx">src</span><span class="o">:</span> <span class="p">[</span><span class="s1">&#39;**/*.{png,jpg,gif}&#39;</span><span class="p">],</span>
          <span class="nx">dest</span><span class="o">:</span> <span class="s1">&#39;&lt;%= globalConfig.dest %&gt;img&#39;</span>
        <span class="p">}]</span>
      <span class="p">}</span>
    <span class="p">},</span>

    <span class="c1">// creates a temporary http server at localhost:port#</span>
    <span class="nx">connect</span><span class="o">:</span> <span class="p">{</span>
      <span class="nx">options</span><span class="o">:</span> <span class="p">{</span>
        <span class="nx">port</span><span class="o">:</span> <span class="mi">4000</span><span class="p">,</span>
        <span class="nx">hostname</span><span class="o">:</span> <span class="s1">&#39;localhost&#39;</span><span class="p">,</span>
        <span class="nx">base</span><span class="o">:</span><span class="s1">&#39;site&#39;</span>
      <span class="p">},</span>
      <span class="nx">dist</span><span class="o">:</span> <span class="p">{</span>
        <span class="nx">options</span><span class="o">:</span> <span class="p">{</span>
            <span class="nx">open</span><span class="o">:</span> <span class="kc">true</span><span class="p">,</span>
            <span class="nx">base</span><span class="o">:</span> <span class="s1">&#39;site&#39;</span><span class="p">,</span>
            <span class="nx">livereload</span><span class="o">:</span> <span class="kc">true</span>
        <span class="p">}</span>
      <span class="p">}</span>
    <span class="p">},</span>

    <span class="c1">// Watches these files and runs their task on save.</span>
    <span class="nx">watch</span><span class="o">:</span> <span class="p">{</span>
      <span class="nx">options</span><span class="o">:</span> <span class="p">{</span>
        <span class="nx">livereload</span><span class="o">:</span> <span class="kc">true</span>
      <span class="p">},</span>
      <span class="nx">site</span><span class="o">:</span> <span class="p">{</span>
        <span class="nx">files</span><span class="o">:</span> <span class="p">[</span><span class="s2">&quot;**/*.php&quot;</span><span class="p">,</span><span class="s2">&quot;**/*.html&quot;</span><span class="p">],</span>
        <span class="nx">livereload</span><span class="o">:</span> <span class="kc">true</span>
      <span class="p">},</span>
      <span class="nx">css</span><span class="o">:</span> <span class="p">{</span>
        <span class="nx">files</span><span class="o">:</span> <span class="p">[</span><span class="s2">&quot;&lt;%= globalConfig.src %&gt;_scss/**/*.scss&quot;</span><span class="p">],</span>
        <span class="nx">tasks</span><span class="o">:</span> <span class="p">[</span><span class="s2">&quot;sass&quot;</span><span class="p">,</span> <span class="s2">&quot;autoprefixer&quot;</span><span class="p">,</span><span class="s2">&quot;concat:css&quot;</span><span class="p">]</span>
      <span class="p">},</span>
      <span class="nx">svg</span><span class="o">:</span> <span class="p">{</span>
        <span class="nx">files</span><span class="o">:</span> <span class="p">[</span><span class="s2">&quot;&lt;%= globalConfig.src %&gt;_svg/*.svg&quot;</span><span class="p">],</span>
        <span class="nx">tasks</span><span class="o">:</span> <span class="p">[</span><span class="s2">&quot;svgstore&quot;</span><span class="p">]</span>
      <span class="p">},</span>
      <span class="nx">js</span><span class="o">:</span> <span class="p">{</span>
        <span class="nx">files</span><span class="o">:</span> <span class="p">[</span><span class="s2">&quot;&lt;%= globalConfig.src %&gt;_js/*.js&quot;</span><span class="p">],</span>
        <span class="nx">tasks</span><span class="o">:</span> <span class="p">[</span><span class="s2">&quot;concat:js&quot;</span><span class="p">]</span>
      <span class="p">},</span>
    <span class="p">},</span>

    <span class="c1">// Combines, prefixes and minifies svgs</span>
    <span class="nx">svgstore</span><span class="o">:</span> <span class="p">{</span>
      <span class="nx">options</span><span class="o">:</span> <span class="p">{</span>
        <span class="nx">prefix</span> <span class="o">:</span> <span class="s2">&quot;shape-&quot;</span><span class="p">,</span>
        <span class="nx">cleanup</span><span class="o">:</span> <span class="kc">false</span><span class="p">,</span>
        <span class="nx">svg</span><span class="o">:</span> <span class="p">{</span>
          <span class="nx">style</span><span class="o">:</span> <span class="s2">&quot;display: none;&quot;</span>
        <span class="p">}</span>
      <span class="p">},</span>
      <span class="k">default</span><span class="o">:</span> <span class="p">{</span>
        <span class="nx">files</span><span class="o">:</span> <span class="p">{</span>
          <span class="s2">&quot;&lt;%= globalConfig.dest %&gt;svg-defs.svg&quot;</span><span class="o">:</span> <span class="p">[</span><span class="s2">&quot;&lt;%= globalConfig.src %&gt;_svg/*.svg&quot;</span><span class="p">]</span>
        <span class="p">}</span>
      <span class="p">}</span>
    <span class="p">}</span>

  <span class="p">});</span>
  <span class="c1">// Used inplace of the grunt require statments.</span>
  <span class="nx">require</span><span class="p">(</span><span class="s1">&#39;load-grunt-tasks&#39;</span><span class="p">)(</span><span class="nx">grunt</span><span class="p">);</span>
  <span class="c1">// Outputs a summary of what happened in the terimanal. </span>
  <span class="nx">require</span><span class="p">(</span><span class="s1">&#39;time-grunt&#39;</span><span class="p">)(</span><span class="nx">grunt</span><span class="p">);</span>


  <span class="nx">grunt</span><span class="p">.</span><span class="nx">registerTask</span><span class="p">(</span><span class="s2">&quot;img&quot;</span><span class="p">,</span> <span class="p">[</span><span class="s2">&quot;imagemin&quot;</span><span class="p">]);</span>
  <span class="nx">grunt</span><span class="p">.</span><span class="nx">registerTask</span><span class="p">(</span><span class="s2">&quot;build&quot;</span><span class="p">,</span> <span class="p">[</span><span class="s2">&quot;sass&quot;</span><span class="p">,</span> <span class="s2">&quot;autoprefixer&quot;</span><span class="p">,</span><span class="s2">&quot;concat&quot;</span><span class="p">,</span><span class="s2">&quot;cssmin&quot;</span><span class="p">,</span><span class="s2">&quot;uglify&quot;</span><span class="p">,</span> <span class="s2">&quot;svgstore&quot;</span><span class="p">,</span><span class="s2">&quot;imagemin&quot;</span><span class="p">]);</span>
  <span class="nx">grunt</span><span class="p">.</span><span class="nx">registerTask</span><span class="p">(</span><span class="s2">&quot;default&quot;</span><span class="p">,</span> <span class="p">[</span><span class="s2">&quot;sass&quot;</span><span class="p">,</span> <span class="s2">&quot;autoprefixer&quot;</span><span class="p">,</span><span class="s2">&quot;concat&quot;</span><span class="p">,</span> <span class="s2">&quot;svgstore&quot;</span><span class="p">,</span> <span class="s2">&quot;connect&quot;</span><span class="p">,</span> <span class="s2">&quot;watch&quot;</span><span class="p">]);</span>

<span class="p">};</span></code></pre></div>

<p>Also, this is all avaliable on Github … <a href="https://github.com/SamPedley/Boiler-Grunt">Here</a></p>
